# MonoPatcher
Inject custom code into Mono assemblies, such as Assembly-CSharp.dll generated by Unity!

## Dependencies
- Mono from [the website](https://www.mono-project.com), tested with 6.10.0.104.
- Mono.Cecil.dll (0.11.2) from [NuGet](https://www.nuget.org/packages/Mono.Cecil/): after `nuget install`, copy Mono.Cecil.dll from `Mono.Cecil.0.11.2/lib/net40/` into `dep/`.

## Building
### Windows
Use Linux instructions with `compile_and_run.bat` in place of `compile_and_run.sh`. I don't have a Windows machine around to test this script on, so please report any issues you have.
### macOS
Should be same as Linux.
### Linux
```bash
./compile_and_run.sh
```
from a shell prompt. Output is saved to `out/MonoPatcher.exe`. `Mono.Cecil.dll` must be placed next to `MonoPatcher.exe` for the latter to work properly.

## Usage
```bash
mono MonoPatcher.exe [input assembly file] [patch directory] [output assembly file]
```
from a shell prompt, with the arguments:
- input assembly file: A relative path to the .dll to be patched.
- patch directory: A relative path to the directory where patch files (see below) should be placed.
- output assembly file: A relative path to the location where the patched .dll will be saved. **Using the same path as the input assembly file may cause undefined behavior. You have been warned.**

## What currently works
Literally nothing. I have to define a patch file format and them implement a patcher that interprets the file format and uses Mono.Cecil to apply the patches.

## What doesn't work/todo
Literally everything.

## Patch files
See [PATCH_FILES.md](doc/PATCH_FILES.md) in the documentation folder.
